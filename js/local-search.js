(function(){function e(t,e,a){;"use strict";var r=jQuery(e);var i=jQuery(a);if(r.length===0){throw Error("No element selected by the searchSelector")}if(i.length===0){throw Error("No element selected by the resultSelector")}if(i.attr("class").indexOf("list-group-item")===-1){i.html('<div class="m-auto text-center"><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div><br/>Loading...</div>')}dataList=[];if(window.location.pathname.indexOf("/culture/movies")!==-1){jQuery.ajax({url:"https://api.jaychou.site/trakt/index",dataType:"json",success:function(t){var e=t.data.movie;var a=[];if(e!==""){var r=JSON.parse(atob(e));for(var i=0;i<r.length;i++){var s=r[i];a.push({title:s.title,content:s.content,url:s.url})}}dataList=a}})}else if(window.location.pathname.indexOf("/culture/shows")!==-1){jQuery.ajax({url:"https://api.jaychou.site/trakt/index",dataType:"json",success:function(t){var e=t.data.show;var a=[];if(e!==""){var r=JSON.parse(atob(e));for(var i=0;i<r.length;i++){var s=r[i];a.push({title:s.title,content:s.content,url:s.url})}}dataList=a}})}else if(window.location.pathname.indexOf("/culture/")!==-1){jQuery.ajax({url:"https://api.jaychou.site/trakt/index",dataType:"json",success:function(t){var e=t.data.movie;var a=t.data.show;var r=[];if(e!==""){var i=JSON.parse(atob(e));for(var s=0;s<i.length;s++){var l=i[s];r.push({title:l.title,content:l.content,url:l.url})}}if(a!==""){var n=JSON.parse(atob(a));for(var s=0;s<n.length;s++){var o=n[s];r.push({title:o.title,content:o.content,url:o.url})}}dataList=r}})}else{jQuery.ajax({url:t,dataType:"xml",success:function(t){dataList=jQuery("entry",t).map(function(){return{title:jQuery("title",this).text(),content:jQuery("content",this).text(),url:jQuery("url",this).text()}}).get()}})}if(i.html().indexOf("list-group-item")===-1){i.html("")}r.on("input",function(){var t=r.val();var f="";var p=t.trim().toLowerCase().split(/[\s-]+/);i.html("");if(t.trim().length<=0){return r.removeClass("invalid").removeClass("valid")}dataList.forEach(function(t){var a=true;if(!t.title||t.title.trim()===""){t.title="Untitled"}var e=t.title.trim();var r=e.toLowerCase();var i=t.content.trim().replace(/<[^>]+>/g,"");var s=i.toLowerCase();var l=t.url;var n=-1;var o=-1;var c=-1;if(CONFIG.include_content_in_search&&s===""){a=false}else{p.forEach(function(t,e){n=r.indexOf(t);o=s.indexOf(t);if(n<0&&o<0){a=false}else{if(o<0){o=0}if(e===0){c=o}}})}if(a){f+="<a href='"+l+"' class='list-group-item list-group-item-action font-weight-bolder search-list-title'>"+e+"</a>";var u=i;if(c>=0){var v=c-20;var h=c+80;if(v<0){v=0}if(v===0){h=100}if(h>u.length){h=u.length}var d=u.substring(v,h);p.forEach(function(t){var e=new RegExp(t,"gi");d=d.replace(e,'<span class="search-word">'+t+"</span>")});f+="<p class='search-list-content'>"+d+"...</p>"}}});if(f.indexOf("list-group-item")===-1){return r.addClass("invalid").removeClass("valid")}r.addClass("valid").removeClass("invalid");i.html(f)})}function t(t,e){"use strict";var a=jQuery(t);var r=jQuery(e);if(a.length===0){throw Error("No element selected by the searchSelector")}if(r.length===0){throw Error("No element selected by the resultSelector")}a.val("").removeClass("invalid").removeClass("valid");r.html("")}var a=jQuery("#modalSearch");var r="#local-search-input";var i="#local-search-result";a.on("show.bs.modal",function(){var t=CONFIG.search_path||"/local-search.xml";e(t,r,i)});a.on("shown.bs.modal",function(){jQuery("#local-search-input").focus()});a.on("hidden.bs.modal",function(){t(r,i)})})();