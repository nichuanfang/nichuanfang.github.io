$(document).ready(function(){var t=jQuery("#background-image");if(t.length===0){return}var n=jQuery("#board");if(n.length===0){return}var a=false;var d=false;var e=function(){var e=n[0].getClientRects()[0].left;a=e>=50;t.css({display:a&&d?"block":"none",left:e-136+"px"})};e();jQuery(window).resize(e);var r=n.offset().top;Fluid.utils.listenScroll(function(){var e=document.body.scrollTop+document.documentElement.scrollTop;d=e>=r;t.css({display:a&&d?"block":"none"})});if(document.querySelector(".movie-culture-list")){var i=1;var o=12;var c=500;var l=200;var s=null;data_ended=false;var u=document.querySelector(".movie-culture-list");var m=u.getAttribute("json-src");var v=u.getAttribute("cover-src");function f(e,l){var t=e["data"]["data"];var s=document.querySelector(".movie-culture-list");t.forEach(function(e){var t=document.createElement("div");t.classList.add("media");var n=document.createElement("div");n.classList.add("media-cover");n.style.backgroundImage="url("+l+e.cover_image_url+")";t.appendChild(n);var a=document.createElement("div");a.classList.add("media-meta");var d=document.createElement("div");d.classList.add("media-meta-item","title");d.textContent=e.movie_name;a.appendChild(d);var r=document.createElement("div");r.classList.add("media-meta-item");var i=document.createElement("span");i.classList.add("author");i.textContent="中国 2021";r.appendChild(i);var o=document.createElement("span");o.classList.add("star-score");o.textContent="★★★★★";r.appendChild(o);a.appendChild(r);var c=document.createElement("div");c.classList.add("media-meta-item","intro");c.textContent=e.movie_description;a.appendChild(c);t.appendChild(a);s.appendChild(t)})}function p(){document.getElementById("loading").style.display="block"}function h(){document.getElementById("loading").style.display="none"}function g(e,t){var n=m+"?page="+e+"&page_size="+t;fetch(n).then(function(e){return e.json()}).then(function(e){if(e["data"]["data"].length===0){h();data_ended=true}f(e,v);h()}).catch(function(e){console.error("Error:",e)})}fetch(m+"?page="+i+"&page_size="+o).then(function(e){return e.json()}).then(function(e){if(e["data"]["data"].length===0){h();data_ended=true}f(e,v)}).catch(function(e){console.error("Error:",e)});window.addEventListener("scroll",function(){if(data_ended){h();return}clearTimeout(s);var e=document.documentElement.scrollHeight-window.innerHeight-window.scrollY;if(e<=l){p();s=setTimeout(function(){i++;if(!data_ended){g(i,o)}},c)}})}});