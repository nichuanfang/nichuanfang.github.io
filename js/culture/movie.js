$(document).ready(function(){if(document.querySelector(".movie-culture-list")){var t=1;var a=12;var n=300;var r=200;var d=null;data_ended=false;var e=document.querySelector(".movie-culture-list");var i=e.getAttribute("json-src");var o=e.getAttribute("cover-src");function c(){document.getElementById("loading").style.display="block"}function l(){document.getElementById("loading").style.display="none"}function u(e){var t=parseFloat(e)/2;if(t>4.3){t=5}var a=parseInt(t);var n=t-a;var r=5-a-Math.ceil(n);var d="";for(var i=0;i<a;i++){d+="â˜…"}for(var i=0;i<n;i++){d+="â˜†"}for(var i=0;i<r;i++){d+=""}return d}function s(e,t){var a=i+"?page="+e+"&page_size="+t;fetch(a).then(function(e){return e.json()}).then(function(e){if(e["data"]["data"].length===0){l();data_ended=true}m(e,o);l()}).catch(function(e){console.error("Error:",e)})}function m(e,l){var t=e["data"]["data"];var s=document.querySelector(".movie-culture-list");t.forEach(function(e){var t=document.createElement("div");t.classList.add("media");var a=document.createElement("div");a.classList.add("media-cover");a.style.backgroundImage="url("+l+e.cover_image_url+")";t.appendChild(a);var n=document.createElement("div");n.classList.add("media-meta");var r=document.createElement("div");r.classList.add("media-meta-item","title");r.textContent=e.movie_name;n.appendChild(r);var d=document.createElement("div");d.classList.add("media-meta-item");var i=document.createElement("span");i.classList.add("author");area=e.area;release_year=e.release_year;i.textContent=area+" "+release_year;d.appendChild(i);var o=document.createElement("span");o.classList.add("star-score");o.textContent=u(e.rating);d.appendChild(o);n.appendChild(d);var c=document.createElement("div");c.classList.add("media-meta-item","intro");c.textContent=e.movie_description;n.appendChild(c);t.appendChild(n);s.appendChild(t)})}fetch(i+"?page="+t+"&page_size="+a).then(function(e){return e.json()}).then(function(e){if(e["data"]["data"].length===0){l();data_ended=true}m(e,o)}).catch(function(e){console.error("Error:",e)});window.addEventListener("scroll",function(){if(data_ended){l();return}clearTimeout(d);var e=document.documentElement.scrollHeight-window.innerHeight-window.scrollY;if(e<=r){c();d=setTimeout(function(){t++;if(!data_ended){s(t,a)}},n)}})}});